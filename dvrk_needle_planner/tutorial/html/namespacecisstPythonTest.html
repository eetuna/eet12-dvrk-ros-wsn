<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: cisstPythonTest Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cisstPythonTest Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a428d6694587c818cb50cf0e289f322be"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a428d6694587c818cb50cf0e289f322be"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>pathTest</b> = os.path.abspath(os.path.dirname(__file__))</td></tr>
<tr class="separator:a428d6694587c818cb50cf0e289f322be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46990aa1a6d15c1f6e45a1264ac2043f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46990aa1a6d15c1f6e45a1264ac2043f"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>filePath</b> = pathTest+'/dvpsm.rob'</td></tr>
<tr class="separator:a46990aa1a6d15c1f6e45a1264ac2043f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54dcfe6fb21415cb239da2e40debbf18"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54dcfe6fb21415cb239da2e40debbf18"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>psm_manip</b> = robManipulator()</td></tr>
<tr class="separator:a54dcfe6fb21415cb239da2e40debbf18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed51a3d903c561b3eb3160564821d5f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ed51a3d903c561b3eb3160564821d5f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>result</b> = psm_manip.LoadRobot(filePath);</td></tr>
<tr class="separator:a9ed51a3d903c561b3eb3160564821d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a567cdb956141fb3c61a42f501fa4f999"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a567cdb956141fb3c61a42f501fa4f999"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>frame</b> = vctFrm3()</td></tr>
<tr class="separator:a567cdb956141fb3c61a42f501fa4f999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bbb7abe7ba4ae1ba68df48b1106df4a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bbb7abe7ba4ae1ba68df48b1106df4a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>inverseFrame</b> = vctFrm3()</td></tr>
<tr class="separator:a8bbb7abe7ba4ae1ba68df48b1106df4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc25679cc1285ffb8fae1517fa7eb904"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc25679cc1285ffb8fae1517fa7eb904"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>rotation</b> = frame.Rotation()</td></tr>
<tr class="separator:abc25679cc1285ffb8fae1517fa7eb904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2983c672448be24ed872afdd9f34185c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2983c672448be24ed872afdd9f34185c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>translation</b> = frame.Translation()</td></tr>
<tr class="separator:a2983c672448be24ed872afdd9f34185c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464d1e7e9c9a4bcb74f6d7212f4e5d20"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a464d1e7e9c9a4bcb74f6d7212f4e5d20"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>precision</b></td></tr>
<tr class="separator:a464d1e7e9c9a4bcb74f6d7212f4e5d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28565b4fda2d9a7c95fab86bbeed4ba7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28565b4fda2d9a7c95fab86bbeed4ba7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>suppress</b></td></tr>
<tr class="separator:a28565b4fda2d9a7c95fab86bbeed4ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2b9d1b5679e4c1f85c8f699ada427d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>frame6to7</b></td></tr>
<tr class="separator:adf2b9d1b5679e4c1f85c8f699ada427d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dd2bc036fe66656f5a36908390ab73"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26dd2bc036fe66656f5a36908390ab73"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>qvec</b> = np.zeros(7)</td></tr>
<tr class="separator:a26dd2bc036fe66656f5a36908390ab73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70be031122b8bcbb50b0aede95cc1bf6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70be031122b8bcbb50b0aede95cc1bf6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dvrk_FK_0to6_array</b> = psm_manip.ForwardKinematics(qvec)</td></tr>
<tr class="separator:a70be031122b8bcbb50b0aede95cc1bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1e567c5c400f4bccd891b3dc536193"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f1e567c5c400f4bccd891b3dc536193"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dvrk_FK_0to6</b> = np.matrix(dvrk_FK_0to6_array)</td></tr>
<tr class="separator:a9f1e567c5c400f4bccd891b3dc536193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7da43fe6d350f83a2f6bcdd9074316d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa7da43fe6d350f83a2f6bcdd9074316d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dvrk_FK_Test</b> = dvrk_FK_0to6*frame6to7</td></tr>
<tr class="separator:aa7da43fe6d350f83a2f6bcdd9074316d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320300c613d757afbe8ef357d1a0acd8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a320300c613d757afbe8ef357d1a0acd8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>qvecIK</b> = np.array([0., 0., 0., 0., 0., 0.])</td></tr>
<tr class="separator:a320300c613d757afbe8ef357d1a0acd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8494e337fca5647d94e7e403d9685ee1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>poseGivenTest</b></td></tr>
<tr class="separator:a8494e337fca5647d94e7e403d9685ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a496b82e37ced773d99480e4b5c28e2d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a496b82e37ced773d99480e4b5c28e2d5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tolerance</b> = 1</td></tr>
<tr class="separator:a496b82e37ced773d99480e4b5c28e2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15bca3c4e68e2732eafdb645d87522f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad15bca3c4e68e2732eafdb645d87522f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>Niteration</b> = 1000</td></tr>
<tr class="separator:ad15bca3c4e68e2732eafdb645d87522f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb19480b440c07e9e3ee948701d1ee3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fb19480b440c07e9e3ee948701d1ee3"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>qErr</b> = (qvec - qvecIK)</td></tr>
<tr class="separator:a1fb19480b440c07e9e3ee948701d1ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fcf7802f505257db56e8bf070847848"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fcf7802f505257db56e8bf070847848"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Jarray</b> = np.zeros((6, 6))</td></tr>
<tr class="separator:a1fcf7802f505257db56e8bf070847848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f36aa8181a55a80ea1660f3f7585d35"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f36aa8181a55a80ea1660f3f7585d35"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Jmat</b> = np.matrix(Jarray)</td></tr>
<tr class="separator:a7f36aa8181a55a80ea1660f3f7585d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3088e2ac3d5a126106f751c351e8a4f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3088e2ac3d5a126106f751c351e8a4f9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TestJacobian</b> = psm_manip.JacobianBody(qvec, Jmat)</td></tr>
<tr class="separator:a3088e2ac3d5a126106f751c351e8a4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">@package docstring
Documentation for this test file

More details:

This file tests the cisst python wrappers for cisstVector and cisstRobot classes.

It generates an instance of vctFrm3, assigns its rotation and translation counterparts
It loads the dvrk psm kinematics, which is defined as a .rob file. It gets the file path and pass thi string.
Creates an instance of a robManipulator
Defines the transformation from dvrk 6th frame to gripper frame
Tests the FK for a predefined set of joint values: T_6/0 = FK(qvec)
Do not append the gripper jaw joint. Only include the first 6 joint as the FK and IK of cisstRobot class based on 6 joints
To get the end effector, first find the pose of the 6th frame w.r.t base from FK. Then multiply this pose with the transformation of T_6/0 * T_7/6 = T_7/0
From the computed pose T_7/0 get the T_6/0 by T_6/0 = T_7/0*inv(T_6/7)
The compute the joint angles by IK(T_6/0) = qvec_IK
Compare qvec_IK with the original qvec and find the error: qerr = qvec - qvec_IK
Set the precision of np.array and np.matrix by np.set_printoptions. Suppress the scientific, i.e. e+00, notation
Calculate the BodyJacobian and pass the computed value to a matrix Jmat. A 6x6 matrix should be passed to function</pre> </div><h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="adf2b9d1b5679e4c1f85c8f699ada427d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cisstPythonTest.frame6to7</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacecisstPythonTest.html">    1</a></span>&#160;= np.matrix([[0.0, -1.0, 0.0, 0.0],</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                     [0.0,  0.0, 1.0, 0.0102],</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                     [-1.0, 0.0, 0.0, 0.0],</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                     [0.0,  0.0, 0.0, 1.0]])</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8494e337fca5647d94e7e403d9685ee1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cisstPythonTest.poseGivenTest</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacecisstPythonTest.html">    1</a></span>&#160;= np.matrix([</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    [-0.2265,    0.4496,    0.8641,   -0.0097],</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    [0.6337,    0.7417,   -0.2198,    0.0166],</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    [-0.7397,    0.4978,   -0.4529,   -0.0888],</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;         [0,         0,         0,    1.0000]])</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
